<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="TrackMAG is an open source development board primarily intended for the development accessible input devices">
    <meta property="og:type" content="article">
    <meta property="og:title" content="TrackMAG â€“ An accessible input device">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://mupfdev.github.io/TrackMAG/">
    <meta property="og:image" content="https://mupfdev.github.io/img/ogp-1200x1200.png">

    <title>mupf.dev</title>
    <link rel="stylesheet" href="/style.min.css">
    <link rel="stylesheet" href="/mupf.css">
    <link rel="stylesheet" href="/magnify.css">
    <link rel="stylesheet" href="/x3dom.css">
    <link rel="stylesheet" href="dfu.css">

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=2">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=2">
    <link rel="manifest" href="/site.webmanifest?v=2">

    <script src="dfu.js"></script>
    <script src="dfuse.js"></script>
    <script src="FileSaver.js"></script>
    <script src="dfu-util.js"></script>

    <script src="/jquery-3.7.1.min.js"></script>
    <script src="/jquery.magnify.js"></script>
    <script src="/js/jquery.magnify-mobile.js"></script>
    <script src="/x3dom.js"></script>

    <script>
      $(document).ready(function() {
      $('.zoom').magnify();
      });
    </script>
  </head>

  <body>
    <h1>mupf.dev</h1>

    <p class="author">Michael Fitzmayer <br> Last updated on October 15th, 2023</p>

    <div class="abstract">
      <p>
        TrackMAG is an open source development board equipped with a
        magnetometer, an accelerometer and a gyroscope and it is
        primarily intended for the development and evaluation of
        accessible input devices.
      </p>
    </div>

    <h2>TrackMAG</h2>

    <nav class="toc">
      <h2>Contents</h2>
      <ol>
        <li><a href="#ref-about">About</a></li>
        <li><a href="#ref-status">Status</a></li>
        <li><a href="#ref-pcb">PCB</a></li>
        <li><a href="#ref-case">Case</a></li>
        <li><a href="#ref-firmware-update">Firmware Update</a></li>
        <li><a href="#ref-help">You want to help?</a></li>
        <li><a href="#ref-licese">License</a></li>
      </ol>
    </nav>

    <h3 id="ref-about">About</h3>

    <p>
      TrackMAG is an open source development board equipped with a
      magnetometer, an accelerometer and a gyroscope.  The project name
      is derived from the first letters of these terms.
    </p>

    <p>
      This board and is primarily intended for the development and
      evaluation of accessible input devices such as a head tracking
      device when connected to the Xbox Adaptive Controller from
      Microsoft.  This is to be fully supported.
    </p>

    <div class="gallery">
      <a href="TrackMAG_v1_3D.png">
        <img src="TrackMAG_v1_3D.png" class="zoom gallery-1x1" alt="TrackMAG v1 3D rendering">
      </a>
    </div>

    <h3 id="ref-status">Status</h3>

    <p>
      The project is currently in the development stage.  Details on the
      current progress can be found
      on <a href="https://discord.com/invite/5UUhyFP6tj">Discord</a> or
      directly
      on <a href="https://github.com/mupfdev/TrackMAG">GitHub</a>.
    </p>

    <h3 id="ref-pcb">TrackMAG v1 PCB</h3>

    <p>
      The core of the board consists of
      an <a href="https://github.com/mupfdev/TrackMAG/blob/main/pdf/STM32F103C8.pdf">STM32F103C8T6</a>
      microcontroller,
      an <a href="https://github.com/mupfdev/TrackMAG/blob/main/pdf/LSM6DS3TR-C.pdf">ST
      LSM6DS3TR-C</a> always-on 3D accelerometer and 3D gyroscope and an
      <a href="https://github.com/mupfdev/TrackMAG/blob/main/pdf/LIS2MDL.pdf">ST LIS2MDL</a> ultra-low power, high-performance 3-axis magnetometer.
    </p>

    <p>
      The board has a JTAG/serial wire debugging (SWD), an UART
      interface and a USB 2.0 (USB Type-C) full-speed interface.
    </p>

    <p>
      Details can be found in the <a href="https://github.com/mupfdev/TrackMAG/blob/main/pdf/Schematic.pdf">schematic</a>.
    </p>

    <div class="free-standing">
      <button onclick="document.getElementById('Iso_PCB').setAttribute('set_bind','true');">Iso</button>
      <button onclick="document.getElementById('Front_PCB').setAttribute('set_bind','true');">Front</button>
      <button onclick="document.getElementById('Back_PCB').setAttribute('set_bind','true');">Back</button>
      <button onclick="document.getElementById('Right_PCB').setAttribute('set_bind','true');">Right</button>
      <button onclick="document.getElementById('Left_PCB').setAttribute('set_bind','true');">Left</button>
      <button onclick="document.getElementById('Top_PCB').setAttribute('set_bind','true');">Top</button>
      <button onclick="document.getElementById('Bottom_PCB').setAttribute('set_bind','true');">Bottom</button>
    </div>

    <X3D height="20em">
      <Scene>
        <Viewpoint id="Iso_PCB" centerOfRotation="2.86102e-06 -0.1725 4.78" position="35.5952 -35.7677 40.3752" orientation="0.742906 0.307722 0.594473 1.21712" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Front_PCB" centerOfRotation="2.86102e-06 -0.1725 4.78" position="2.86102e-06 -61.8252 4.78" orientation="1 0 0 1.5708" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Back_PCB" centerOfRotation="2.86102e-06 -0.1725 4.78" position="2.86102e-06 61.4802 4.78" orientation="0 0.707107 0.707107 3.14159" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Right_PCB" centerOfRotation="2.86102e-06 -0.1725 4.78" position="61.6527 -0.1725 4.78" orientation="0.57735 0.57735 0.57735 2.0944" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Left_PCB" centerOfRotation="2.86102e-06 -0.1725 4.78" position="-61.6527 -0.1725 4.78" orientation="-0.57735 0.57735 0.57735 4.18879" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Top_PCB" centerOfRotation="2.86102e-06 -0.1725 4.78" position="2.86102e-06 -0.1725 66.4327" orientation="0 0 1 0" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Bottom_PCB" centerOfRotation="2.86102e-06 -0.1725 4.78" position="2.86102e-06 -0.1725 -56.8727" orientation="1 0 0 3.14159" description="camera" fieldOfView="0.9"></Viewpoint>

        <Transform>
          <inline url="TrackMAG_v1_PCB.x3d"></inline>
        </Transform>
      </Scene>
    </X3D>

    <h3 id="ref-case">TrackMAG v1 case</h3>

    <p>
      The case is functional and will later be connected to any kind of
      mount, such as a headset, via a twist-lock mechanism.
    </p>

    <div class="free-standing">
      <button onclick="document.getElementById('Iso').setAttribute('set_bind','true');">Iso</button>
      <button onclick="document.getElementById('Front').setAttribute('set_bind','true');">Front</button>
      <button onclick="document.getElementById('Back').setAttribute('set_bind','true');">Back</button>
      <button onclick="document.getElementById('Right').setAttribute('set_bind','true');">Right</button>
      <button onclick="document.getElementById('Left').setAttribute('set_bind','true');">Left</button>
      <button onclick="document.getElementById('Top').setAttribute('set_bind','true');">Top</button>
      <button onclick="document.getElementById('Bottom').setAttribute('set_bind','true');">Bottom</button>
    </div>

    <X3D height="20em">
      <Scene>
        <Viewpoint id="Iso" centerOfRotation="0 0 4.975" position="40.3926 -40.3926 45.3676" orientation="0.742906 0.307722 0.594473 1.21712" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Front" centerOfRotation="0 0 4.975" position="0 -69.962 4.975" orientation="1 0 0 1.5708" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Back" centerOfRotation="0 0 4.975" position="0 69.962 4.975" orientation="0 0.707107 0.707107 3.14159" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Right" centerOfRotation="0 0 4.975" position="69.962 0 4.975" orientation="0.57735 0.57735 0.57735 2.0944" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Left" centerOfRotation="0 0 4.975" position="-69.962 0 4.975" orientation="-0.57735 0.57735 0.57735 4.18879" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Top" centerOfRotation="0 0 4.975" position="0 0 74.937" orientation="0 0 1 0" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Bottom" centerOfRotation="0 0 4.975" position="0 0 -64.987" orientation="1 0 0 3.14159" description="camera" fieldOfView="0.9"></Viewpoint>

        <Transform>
          <inline url="TrackMAG_v1.x3d"></inline>
        </Transform>
      </Scene>
    </X3D>

    <h3 id="ref-firmware-update">Firmware Update</h3>

    <p>
      <span id="status"></span>
    </p>
    <p>
      <label for="vid">Vendor ID (hex):</label>
      <input list="vendor_ids" type="text" name="vid" id="vid" maxlength="6" size="8" pattern="0x[A-Fa-f0-9]{1,4}"/>
      <datalist id="vendor_ids">
        <option value="0x1209">dapboot DFU bootloader</option>
        <option value="0x0D28">mbed DAPLink</option>
        <option value="0x1EAF">LeafLabs Maple/stm32duino bootloader</option>
      </datalist>
    </p>
    <p>
      <button id="connect">Connect</button>
    </p>
    <dialog id="interfaceDialog">
      Your device has multiple DFU interfaces. Select one from the list below:
      <form id="interfaceForm" method="dialog">
        <button id="selectInterface" type="submit">Select interface</button>
      </form>
    </dialog>
    <p>
      <div id="usbInfo" style="white-space: pre"></div>
      <div id="dfuInfo" style="white-space: pre"></div>
    </p>
    <fieldset>
      <legend>Runtime mode</legend>
      <button id="detach" disabled="true">Detach DFU</button>
    </fieldset>
    <fieldset>
      <form id="configForm">
        <label for="transferSize">Transfer Size:</label>
        <input type="number" name="transferSize" id="transferSize" value="1024"/>
        <div id="dfuseFields" hidden="true">
          <label for="dfuseStartAddress">DfuSe Start Address:</label>
          <input type="text" name="dfuseStartAddress" id="dfuseStartAddress" title="Initial memory address to read/write from (hex)" size="10" pattern="0x[A-Fa-f0-9]+"/>
          <label for="dfuseUploadSize">DfuSe Upload Size:</label>
          <input type="number" name="dfuseUploadSize" id="dfuseUploadSize" min="1"/>
        </div>

        <legend>DFU mode</legend>
        <fieldset>
          <legend>Firmware Download (write to USB device)</legend>
          <p>
            <input type="file" id="firmwareFile" name="file" disabled="true"/>
          </p>
          <p>
            <button id="download" disabled="true">Download</button>
          </p>
          <div class="log" id="downloadLog"></div>
        </fieldset>
        <fieldset>
          <legend>Firmware Upload (read from USB device)</legend>
          <p>
            <button id="upload" disabled="true">Upload</button>
          </p>
          <div class="log" id="uploadLog"></div>
        </fieldset>
      </form>
    </fieldset>

    <p>
      <a href="https://github.com/devanlai/webdfu">webdfu</a> by Devan
      Lai is licensed under the "The ISC License".  See the
      file <a href="https://github.com/devanlai/webdfu/blob/gh-pages/LICENSE">LICENSE</a>
      for details.
    </p>

    <h3 id="ref-help">You want to help?</h3>

    <p>
        If this project interests you and you would like to help, please
        consider donating a small amount to <a
        href="http://www.flylillo.com/en/Home.html">flyLILLO ETS</a>, a
        non-profit organisation with the goal of helping people with
        physical disabilities to play video games.  Thank you!
    </p>

    <h3 id="ref-license">License</h3>

    <p>
      This project's source code is, unless stated otherwise, licensed
      under the "The MIT License".  See the
      file <a href="https://github.com/mupfdev/TrackMAG/blob/main/LICENSE.md">LICENSE.md</a>
      for details.
    </p>

    <p>
      <a href="/">Go back</a>
    </p>
</body>
</html>
