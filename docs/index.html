<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="TrackMAG is an open source development board primarily intended for the development accessible input devices">
    <meta property="og:type" content="article">
    <meta property="og:title" content="TrackMAG â€“ An accessible input device">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://mupfdev.github.io/TrackMAG/">
    <meta property="og:image" content="https://mupfdev.github.io/img/ogp-1200x1200.png">

    <title>mupf.dev</title>
    <link rel="stylesheet" href="/style.min.css">
    <link rel="stylesheet" href="/mupf.css">
    <link rel="stylesheet" href="/magnify.css">
    <link rel="stylesheet" href="/x3dom.css">
    <link rel="stylesheet" href="dfu.css">

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=2">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=2">
    <link rel="manifest" href="/site.webmanifest?v=2">

    <script src="dfu.js"></script>
    <script src="dfuse.js"></script>
    <script src="FileSaver.js"></script>
    <script src="dfu-util.js"></script>

    <script src="/jquery-3.7.1.min.js"></script>
    <script src="/jquery.magnify.js"></script>
    <script src="/jquery.magnify-mobile.js"></script>
    <script src="/minimal-lightbox.min.js"></script>
    <script src="/x3dom.js"></script>

    <script>
      $(document).ready(function() {
      $('.zoom').magnify();
      });
    </script>
  </head>

  <body>
    <h1>mupf.dev</h1>

    <p class="author">Michael Fitzmayer <br> Last updated on October 21th, 2023</p>

    <div class="abstract">
      <p>
        TrackMAG is an open hardware development board equipped with a
        magnetometer, an accelerometer and a gyroscope, primarily
        intended for developing accessible input devices.
      </p>
    </div>

    <h2>TrackMAG</h2>

    <nav class="toc">
      <h2>Contents</h2>
      <ol>
        <li><a href="#about">About</a></li>
        <li><a href="#project-status">Project Status</a></li>
        <li><a href="#cad-pcb">TrackMAG v1 PCB</a></li>
        <li><a href="#cad-case">TrackMAG v1 Case</a></li>
        <li><a href="#prototype">Prototype</a></li>
        <li><a href="#firmware-update">Firmware Update</a></li>
        <li><a href="#wanna-help">You want to help?</a></li>
        <li><a href="#licence">Licence</a></li>
      </ol>
    </nav>

    <h3 id="about">About</h3>

    <p>
      TrackMAG is an open hardware development board equipped with a
      magnetometer, an accelerometer and a gyroscope.  The project name
      is derived from the first letters of these terms.
    </p>

    <p>
      The board is primarily intended for developing accessible input
      devices and provide head tracking.  By being compatible with
      the <a href="https://www.xbox.com/en-US/accessories/controllers/xbox-adaptive-controller">Xbox
      Adaptive Controller</a>, TrackMAG could possibly support people
      with physical disabilities to play video games.
    </p>

    <div class="gallery">
      <a href="TrackMAG_v1_3D.png">
        <img src="TrackMAG_v1_3D.png" class="zoom gallery-1x1" alt="TrackMAG v1 3D rendering">
      </a>
    </div>

    <h3 id="project-status">Project Status</h3>

    <p>
      The project is currently in early prototype status.  Details on
      the current progress can be found
      on <a href="https://discord.com/invite/5UUhyFP6tj">Discord</a> or
      directly
      on <a href="https://github.com/mupfdev/TrackMAG">GitHub</a>.
    </p>

    <h3 id="cad-pcb">TrackMAG v1 PCB</h3>

    <p>
      The core of the board consists of
      an <a href="https://github.com/mupfdev/TrackMAG/blob/main/pdf/STM32F103C8.pdf">STM32F103C8T6</a>
      microcontroller,
      an <a href="https://github.com/mupfdev/TrackMAG/blob/main/pdf/LSM6DS3TR-C.pdf">ST
        LSM6DS3TR-C</a> always-on 3D accelerometer and 3D gyroscope and an
      <a href="https://github.com/mupfdev/TrackMAG/blob/main/pdf/LIS2MDL.pdf">ST LIS2MDL</a> ultra-low power, high-performance 3-axis magnetometer.
    </p>

    <p>
      The board has a JTAG/serial wire debugging (SWD), UART, interface
      and a USB 2.0 (USB Type-C) full-speed interface.
    </p>

    <p>
      Details can be found in the <a href="https://github.com/mupfdev/TrackMAG/blob/main/pdf/Schematic.pdf">schematic</a>.
    </p>

    <div class="free-standing">
      <button onclick="document.getElementById('Iso_PCB').setAttribute('set_bind','true');">Iso</button>
      <button onclick="document.getElementById('Front_PCB').setAttribute('set_bind','true');">Front</button>
      <button onclick="document.getElementById('Back_PCB').setAttribute('set_bind','true');">Back</button>
      <button onclick="document.getElementById('Right_PCB').setAttribute('set_bind','true');">Right</button>
      <button onclick="document.getElementById('Left_PCB').setAttribute('set_bind','true');">Left</button>
      <button onclick="document.getElementById('Top_PCB').setAttribute('set_bind','true');">Top</button>
      <button onclick="document.getElementById('Bottom_PCB').setAttribute('set_bind','true');">Bottom</button>
    </div>

    <X3D height="20em">
      <Scene>
        <Viewpoint id="Iso_PCB" centerOfRotation="2.86102e-06 -0.1725 4.78" position="35.5952 -35.7677 40.3752" orientation="0.742906 0.307722 0.594473 1.21712" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Front_PCB" centerOfRotation="2.86102e-06 -0.1725 4.78" position="2.86102e-06 -61.8252 4.78" orientation="1 0 0 1.5708" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Back_PCB" centerOfRotation="2.86102e-06 -0.1725 4.78" position="2.86102e-06 61.4802 4.78" orientation="0 0.707107 0.707107 3.14159" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Right_PCB" centerOfRotation="2.86102e-06 -0.1725 4.78" position="61.6527 -0.1725 4.78" orientation="0.57735 0.57735 0.57735 2.0944" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Left_PCB" centerOfRotation="2.86102e-06 -0.1725 4.78" position="-61.6527 -0.1725 4.78" orientation="-0.57735 0.57735 0.57735 4.18879" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Top_PCB" centerOfRotation="2.86102e-06 -0.1725 4.78" position="2.86102e-06 -0.1725 66.4327" orientation="0 0 1 0" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Bottom_PCB" centerOfRotation="2.86102e-06 -0.1725 4.78" position="2.86102e-06 -0.1725 -56.8727" orientation="1 0 0 3.14159" description="camera" fieldOfView="0.9"></Viewpoint>

        <Transform>
          <inline url="TrackMAG_v1_PCB.x3d"></inline>
        </Transform>
      </Scene>
    </X3D>

    <h3 id="cad-case">TrackMAG v1 case</h3>

    <p>
      The housing is kept simple and functional and can be customised as
      desired using <a href="https://www.freecad.org/">FreeCAD</a>.
    </p>

    <div class="free-standing">
      <button onclick="document.getElementById('Iso').setAttribute('set_bind','true');">Iso</button>
      <button onclick="document.getElementById('Front').setAttribute('set_bind','true');">Front</button>
      <button onclick="document.getElementById('Back').setAttribute('set_bind','true');">Back</button>
      <button onclick="document.getElementById('Right').setAttribute('set_bind','true');">Right</button>
      <button onclick="document.getElementById('Left').setAttribute('set_bind','true');">Left</button>
      <button onclick="document.getElementById('Top').setAttribute('set_bind','true');">Top</button>
      <button onclick="document.getElementById('Bottom').setAttribute('set_bind','true');">Bottom</button>
    </div>

    <X3D height="20em">
      <Scene>
        <Viewpoint id="Iso" centerOfRotation="0 0 8.3" position="40.4248 -40.4248 48.7248" orientation="0.742906 0.307722 0.594473 1.21712" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Front" centerOfRotation="0 0 8.3" position="0 -70.0179 8.3" orientation="1 0 0 1.5708" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Back" centerOfRotation="0 0 8.3" position="0 70.0179 8.3" orientation="0 0.707107 0.707107 3.14159" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Right" centerOfRotation="0 0 8.3" position="70.0179 0 8.3" orientation="0.57735 0.57735 0.57735 2.0944" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Left" centerOfRotation="0 0 8.3" position="-70.0179 0 8.3" orientation="-0.57735 0.57735 0.57735 4.18879" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Top" centerOfRotation="0 0 8.3" position="0 0 78.3179" orientation="0 0 1 0" description="camera" fieldOfView="0.9"></Viewpoint>
        <Viewpoint id="Bottom" centerOfRotation="0 0 8.3" position="0 0 -61.7179" orientation="1 0 0 3.14159" description="camera" fieldOfView="0.9"></Viewpoint>

        <Transform>
          <inline url="TrackMAG_v1.x3d"></inline>
        </Transform>
      </Scene>
    </X3D>

    <h3 id="prototype">Prototype</h3>

    <p>
      A few pictures of the initial prototype:
    </p>

    <div class="gallery free-standing">
      <img class="image-zoom gallery-3x1" src="TrackMAG_v1_Prototype_01.jpg" alt="TrackMAG v1 prototype 1">
      <img class="image-zoom gallery-3x1" src="TrackMAG_v1_Prototype_02.jpg" alt="TrackMAG v1 prototype 2">
      <img class="image-zoom gallery-3x1" src="TrackMAG_v1_Prototype_03.jpg" alt="TrackMAG v1 prototype 3">
    </div>

    <p>
      The housing can be attached either via a twist-lock mechanism or
      via a Velcro cable tie. The mechanical specifications for the
      twist-lock mechanism are available for download
      on <a href="https://github.com/mupfdev/TrackMAG/tree/main/cad">GitHub</a>.
    </p>

    <h3 id="firmware-update">Firmware Update</h3>

    <p>
      <span id="status"></span>
    </p>
    <p>
      <label for="vid">Vendor ID (hex):</label>
      <input list="vendor_ids" type="text" name="vid" id="vid" maxlength="6" size="8" pattern="0x[A-Fa-f0-9]{1,4}">
      <datalist id="vendor_ids">
        <option value="0x0483">TrackMAG</option>
      </datalist>
    </p>
    <p>
      <button id="connect">Connect</button>
      <button id="detach" disabled hidden>Detach DFU</button>
    </p>

    <dialog id="interfaceDialog">
      Your device has multiple DFU interfaces.  Select one from the list below:
      <form id="interfaceForm" method="dialog">
        <button id="selectInterface" type="submit">Select interface</button>
      </form>
    </dialog>

    <div class="free-standing">
      <div id="usbInfo" style="white-space: pre"></div>
      <div id="dfuInfo" style="white-space: pre"></div>
    </div>

    <fieldset class="free-standing">
      <form id="configForm">
        <label for="transferSize">Transfer Size:</label>

        <input class="free-standing" type="number" name="transferSize" id="transferSize" value="1024">

        <div id="dfuseFields" hidden>
          <label for="dfuseStartAddress">DfuSe Start Address:</label>
          <input type="text" name="dfuseStartAddress" id="dfuseStartAddress" title="Initial memory address to read/write from (hex)" size="10" pattern="0x[A-Fa-f0-9]+">
          <label for="dfuseUploadSize">DfuSe Upload Size:</label>
          <input type="number" name="dfuseUploadSize" id="dfuseUploadSize" min="1">
        </div>

        <fieldset>
          <legend>Flash Firmware</legend>
          <p>
            <input type="file" id="firmwareFile" name="file" disabled>
          </p>
          <p>
            <button id="download" disabled>Flash</button>
          </p>
          <div class="log" id="downloadLog"></div>
        </fieldset>

        <fieldset>
          <legend>Dump Firmware</legend>
          <p>
            <button id="upload" disabled>Dump</button>
          </p>
          <div class="log" id="uploadLog"></div>
        </fieldset>
      </form>
    </fieldset>

    <p>
      <a href="https://github.com/devanlai/webdfu">webdfu</a> by Devan
      Lai is licenced under the
      the <a href="https://github.com/devanlai/webdfu/blob/gh-pages/LICENSE">ISC
      License</a>.
    </p>

    <h3 id="wanna-help">You want to help?</h3>

    <p>
      If this project interests you and you would like to help, please
      consider donating a small amount
      to <a href="http://www.flylillo.com/en/Home.html">flyLILLO
      ETS</a>, a non-profit organisation with the goal of helping people
      with physical disabilities to play video games.  Thank you!
    </p>

    <h3 id="licence">Licence</h3>

    <p>
      This project is, unless stated otherwise, licensed under
      the <a href="https://ohwr.org/cern_ohl_p_v2.txt">CERN Open
      Hardware Licence Version 2 - Permissive</a>.
    </p>

    <p>
      <a href="/">Go back</a>
    </p>
  </body>
</html>
